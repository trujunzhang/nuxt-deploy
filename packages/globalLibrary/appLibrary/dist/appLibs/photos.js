"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Photos = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _tools = require("@app/tools");

var Photos = /*#__PURE__*/function () {
  function Photos() {
    (0, _classCallCheck2["default"])(this, Photos);
  }

  (0, _createClass2["default"])(Photos, null, [{
    key: "getPhotoThumbnailUrl",
    value: function getPhotoThumbnailUrl(photo) {
      return photo.thumbnailUrl;
    }
  }, {
    key: "getOriginalUrl",
    value: function getOriginalUrl(photo) {
      return photo.originalUrl;
    }
  }, {
    key: "getImageUrlInListPhotosDict",
    value: function getImageUrlInListPhotosDict(params) {
      var model = params.model,
          listTask = params.listTask;
      var id = model.id;
      var listPhotosDict = listTask.listPhotosDict;

      if (!!listPhotosDict) {
        if (Object.keys(listPhotosDict).indexOf(id) !== -1) {
          return listPhotosDict[id];
        }
      }

      return '';
    }
  }, {
    key: "getListThumbnailUrl",
    value: function getListThumbnailUrl() {
      var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var photo = item.listPhoto || {};
      return Photos.getPhotoThumbnailUrl(photo);
    }
  }, {
    key: "isPhotoParseObjectOwnRecipe",
    value: function isPhotoParseObjectOwnRecipe(recipeUniqueId, photoParseInstance) {
      var recipeParseInstance = photoParseInstance.get('recipe');

      if (!!recipeParseInstance && recipeUniqueId === recipeParseInstance.get('uniqueId')) {
        return true;
      }

      return false;
    }
  }, {
    key: "isPhotoOwnRecipe",
    value: function isPhotoOwnRecipe(recipeUniqueId, photo) {
      var recipe = photo.recipe;

      if (!!recipe) {
        return recipeUniqueId === recipe.uniqueId;
      }

      return false;
    }
  }, {
    key: "getPhotoType",
    value: function getPhotoType(sectionType) {
      var photoTypes = Photos.config.photoTypes;
      return photoTypes[sectionType];
    }
  }, {
    key: "removePhotoFromList",
    value: function removePhotoFromList(_ref, selectedPhoto) {
      var photosCache = _ref.photosCache;

      var id = _tools.UnderscoreUtils.findWhereInArray({
        array: photosCache,
        properties: {
          id: selectedPhoto.id
        }
      });

      var nextPhotosCache = _tools.UnderscoreUtils.withoutInArray({
        array: photosCache,
        id: id
      });

      return nextPhotosCache;
    }
  }, {
    key: "toSelectedPhotoCreatedAtString",
    value: function toSelectedPhotoCreatedAtString(createdAt) {
      return _tools.MomentUtils.toDateString(createdAt, Photos.config.selectedPhotoCreatedAtFormat);
    }
  }]);
  return Photos;
}();

exports.Photos = Photos;
Photos.config = {
  paginationCountPerPage: 6 * 5,
  // paginationCountPerPage: 6 * 1, //Using it now.
  // July 29, 2017
  selectedPhotoCreatedAtFormat: 'MMMM DD, YYYY',
  placeHolderSmallImage: {
    PAGE_MAIN_FORM: '',
    PAGE_MAIN_FORM_WITH_PHOTO_OVERLAY: '',
    PAGE_PHOTOS_BROWSER_FORM: '',
    PAGE_PHOTOS_BROWSER_FORM_WITH_PHOTO_OVERLAY: '',
    PARSE_RESTAURANTS: '/static/default/blank_biz_small.png',
    PARSE_USERS: '/static/default/user_30_square.png',
    PARSE_RECORDS: '',
    PARSE_EVENTS: '/static/default/blank_biz_small.png',
    PARSE_RECIPES: '/static/default/blank_biz_small.png',
    PARSE_PHOTOS: '',
    PARSE_REVIEWS: '',
    PARSE_PEOPLE_IN_EVENT: ''
  },
  placeHolderLargeImage: {
    PAGE_MAIN_FORM: '',
    PAGE_MAIN_FORM_WITH_PHOTO_OVERLAY: '',
    PAGE_PHOTOS_BROWSER_FORM: '',
    PAGE_PHOTOS_BROWSER_FORM_WITH_PHOTO_OVERLAY: '',
    PARSE_RESTAURANTS: '/static/default/blank_biz_large.png',
    PARSE_USERS: '',
    PARSE_RECORDS: '',
    PARSE_EVENTS: '/static/default/blank_biz_large.png',
    PARSE_RECIPES: '',
    PARSE_PHOTOS: '',
    PARSE_REVIEWS: '',
    PARSE_PEOPLE_IN_EVENT: ''
  },
  photoTypes: {
    SECTION_PHOTOS_BROWSER_FOR_RESTAURANT: 'restaurant',
    SECTION_PHOTOS_BROWSER_FOR_EVENT: 'event',
    SECTION_PHOTOS_BROWSER_FOR_RECIPE: 'recipe',
    SECTION_PHOTOS_BROWSER_FOR_USER: 'user'
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcHBMaWJzL3Bob3Rvcy50cyJdLCJuYW1lcyI6WyJQaG90b3MiLCJwaG90byIsInRodW1ibmFpbFVybCIsIm9yaWdpbmFsVXJsIiwicGFyYW1zIiwibW9kZWwiLCJsaXN0VGFzayIsImlkIiwibGlzdFBob3Rvc0RpY3QiLCJPYmplY3QiLCJrZXlzIiwiaW5kZXhPZiIsIml0ZW0iLCJsaXN0UGhvdG8iLCJnZXRQaG90b1RodW1ibmFpbFVybCIsInJlY2lwZVVuaXF1ZUlkIiwicGhvdG9QYXJzZUluc3RhbmNlIiwicmVjaXBlUGFyc2VJbnN0YW5jZSIsImdldCIsInJlY2lwZSIsInVuaXF1ZUlkIiwic2VjdGlvblR5cGUiLCJwaG90b1R5cGVzIiwiY29uZmlnIiwic2VsZWN0ZWRQaG90byIsInBob3Rvc0NhY2hlIiwiVW5kZXJzY29yZVV0aWxzIiwiZmluZFdoZXJlSW5BcnJheSIsImFycmF5IiwicHJvcGVydGllcyIsIm5leHRQaG90b3NDYWNoZSIsIndpdGhvdXRJbkFycmF5IiwiY3JlYXRlZEF0IiwiTW9tZW50VXRpbHMiLCJ0b0RhdGVTdHJpbmciLCJzZWxlY3RlZFBob3RvQ3JlYXRlZEF0Rm9ybWF0IiwicGFnaW5hdGlvbkNvdW50UGVyUGFnZSIsInBsYWNlSG9sZGVyU21hbGxJbWFnZSIsIlBBR0VfTUFJTl9GT1JNIiwiUEFHRV9NQUlOX0ZPUk1fV0lUSF9QSE9UT19PVkVSTEFZIiwiUEFHRV9QSE9UT1NfQlJPV1NFUl9GT1JNIiwiUEFHRV9QSE9UT1NfQlJPV1NFUl9GT1JNX1dJVEhfUEhPVE9fT1ZFUkxBWSIsIlBBUlNFX1JFU1RBVVJBTlRTIiwiUEFSU0VfVVNFUlMiLCJQQVJTRV9SRUNPUkRTIiwiUEFSU0VfRVZFTlRTIiwiUEFSU0VfUkVDSVBFUyIsIlBBUlNFX1BIT1RPUyIsIlBBUlNFX1JFVklFV1MiLCJQQVJTRV9QRU9QTEVfSU5fRVZFTlQiLCJwbGFjZUhvbGRlckxhcmdlSW1hZ2UiLCJTRUNUSU9OX1BIT1RPU19CUk9XU0VSX0ZPUl9SRVNUQVVSQU5UIiwiU0VDVElPTl9QSE9UT1NfQlJPV1NFUl9GT1JfRVZFTlQiLCJTRUNUSU9OX1BIT1RPU19CUk9XU0VSX0ZPUl9SRUNJUEUiLCJTRUNUSU9OX1BIT1RPU19CUk9XU0VSX0ZPUl9VU0VSIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUE7O0lBR2FBLE07Ozs7Ozs7eUNBMENpQkMsSyxFQUEwQjtBQUNwRCxhQUFPQSxLQUFLLENBQUNDLFlBQWI7QUFDRDs7O21DQUVxQkQsSyxFQUEwQjtBQUM5QyxhQUFPQSxLQUFLLENBQUNFLFdBQWI7QUFDRDs7O2dEQUVrQ0MsTSxFQUFpRDtBQUFBLFVBQzFFQyxLQUQwRSxHQUN0REQsTUFEc0QsQ0FDMUVDLEtBRDBFO0FBQUEsVUFDbkVDLFFBRG1FLEdBQ3RERixNQURzRCxDQUNuRUUsUUFEbUU7QUFBQSxVQUUxRUMsRUFGMEUsR0FFbkVGLEtBRm1FLENBRTFFRSxFQUYwRTtBQUFBLFVBRzFFQyxjQUgwRSxHQUd2REYsUUFIdUQsQ0FHMUVFLGNBSDBFOztBQUlsRixVQUFJLENBQUMsQ0FBQ0EsY0FBTixFQUFzQjtBQUNwQixZQUFJQyxNQUFNLENBQUNDLElBQVAsQ0FBWUYsY0FBWixFQUE0QkcsT0FBNUIsQ0FBb0NKLEVBQXBDLE1BQTRDLENBQUMsQ0FBakQsRUFBb0Q7QUFDbEQsaUJBQU9DLGNBQWMsQ0FBQ0QsRUFBRCxDQUFyQjtBQUNEO0FBQ0Y7O0FBQ0QsYUFBTyxFQUFQO0FBQ0Q7OzswQ0FFMEM7QUFBQSxVQUFoQkssSUFBZ0IsdUVBQUosRUFBSTtBQUN6QyxVQUFNWCxLQUFLLEdBQUdXLElBQUksQ0FBQ0MsU0FBTCxJQUFrQixFQUFoQztBQUNBLGFBQU9iLE1BQU0sQ0FBQ2Msb0JBQVAsQ0FBNEJiLEtBQTVCLENBQVA7QUFDRDs7O2dEQUVrQ2MsYyxFQUFnQkMsa0IsRUFBa0M7QUFDbkYsVUFBTUMsbUJBQW1CLEdBQUdELGtCQUFrQixDQUFDRSxHQUFuQixDQUF1QixRQUF2QixDQUE1Qjs7QUFDQSxVQUFJLENBQUMs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aUNBQWlDLEVBQUUsUUFIekI7QUFJVkMsSUFBQUEsK0JBQStCLEVBQUU7QUFKdkI7QUFqQ0UsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVuZGVyc2NvcmVVdGlscyB9IGZyb20gJ0BhcHAvdG9vbHMnXG5pbXBvcnQgeyBNb21lbnRVdGlscyB9IGZyb20gJ0BhcHAvdG9vbHMnXG5cbmV4cG9ydCBjbGFzcyBQaG90b3Mge1xuICBzdGF0aWMgY29uZmlnID0ge1xuICAgIHBhZ2luYXRpb25Db3VudFBlclBhZ2U6IDYgKiA1LFxuICAgIC8vIHBhZ2luYXRpb25Db3VudFBlclBhZ2U6IDYgKiAxLCAvL1VzaW5nIGl0IG5vdy5cbiAgICAvLyBKdWx5IDI5LCAyMDE3XG4gICAgc2VsZWN0ZWRQaG90b0NyZWF0ZWRBdEZvcm1hdDogJ01NTU0gREQsIFlZWVknLFxuICAgIHBsYWNlSG9sZGVyU21hbGxJbWFnZToge1xuICAgICAgUEFHRV9NQUlOX0ZPUk06ICcnLFxuICAgICAgUEFHRV9NQUlOX0ZPUk1fV0lUSF9QSE9UT19PVkVSTEFZOiAnJyxcbiAgICAgIFBBR0VfUEhPVE9TX0JST1dTRVJfRk9STTogJycsXG4gICAgICBQQUdFX1BIT1RPU19CUk9XU0VSX0ZPUk1fV0lUSF9QSE9UT19PVkVSTEFZOiAnJyxcbiAgICAgIFBBUlNFX1JFU1RBVVJBTlRTOiAnL3N0YXRpYy9kZWZhdWx0L2JsYW5rX2Jpel9zbWFsbC5wbmcnLFxuICAgICAgUEFSU0VfVVNFUlM6ICcvc3RhdGljL2RlZmF1bHQvdXNlcl8zMF9zcXVhcmUucG5nJyxcbiAgICAgIFBBUlNFX1JFQ09SRFM6ICcnLFxuICAgICAgUEFSU0VfRVZFTlRTOiAnL3N0YXRpYy9kZWZhdWx0L2JsYW5rX2Jpel9zbWFsbC5wbmcnLFxuICAgICAgUEFSU0VfUkVDSVBFUzogJy9zdGF0aWMvZGVmYXVsdC9ibGFua19iaXpfc21hbGwucG5nJyxcbiAgICAgIFBBUlNFX1BIT1RPUzogJycsXG4gICAgICBQQVJTRV9SRVZJRVdTOiAnJyxcbiAgICAgIFBBUlNFX1BFT1BMRV9JTl9FVkVOVDogJydcbiAgICB9LFxuICAgIHBsYWNlSG9sZGVyTGFyZ2VJbWFnZToge1xuICAgICAgUEFHRV9NQUlOX0ZPUk06ICcnLFxuICAgICAgUEFHRV9NQUlOX0ZPUk1fV0lUSF9QSE9UT19PVkVSTEFZOiAnJyxcbiAgICAgIFBBR0VfUEhPVE9TX0JST1dTRVJfRk9STTogJycsXG4gICAgICBQQUdFX1BIT1RPU19CUk9XU0VSX0ZPUk1fV0lUSF9QSE9UT19PVkVSTEFZOiAnJyxcbiAgICAgIFBBUlNFX1JFU1RBVVJBTlRTOiAnL3N0YXRpYy9kZWZhdWx0L2JsYW5rX2Jpel9sYXJnZS5wbmcnLFxuICAgICAgUEFSU0VfVVNFUlM6ICcnLFxuICAgICAgUEFSU0VfUkVDT1JEUzogJycsXG4gICAgICBQQVJTRV9FVkVOVFM6ICcvc3RhdGljL2RlZmF1bHQvYmxhbmtfYml6X2xhcmdlLnBuZycsXG4gICAgICBQQVJTRV9SRUNJUEVTOiAnJyxcbiAgICAgIFBBUlNFX1BIT1RPUzogJycsXG4gICAgICBQQVJTRV9SRVZJRVdTOiAnJyxcbiAgICAgIFBBUlNFX1BFT1BMRV9JTl9FVkVOVDogJydcbiAgICB9LFxuICAgIHBob3RvVHlwZXM6IHtcbiAgICAgIFNFQ1RJT05fUEhPVE9TX0JST1dTRVJfRk9SX1JFU1RBVVJBTlQ6ICdyZXN0YXVyYW50JyxcbiAgICAgIFNFQ1RJT05fUEhPVE9TX0JST1dTRVJfRk9SX0VWRU5UOiAnZXZlbnQnLFxuICAgICAgU0VDVElPTl9QSE9UT1NfQlJPV1NFUl9GT1JfUkVDSVBFOiAncmVjaXBlJyxcbiAgICAgIFNFQ1RJT05fUEhPVE9TX0JST1dTRVJfRk9SX1VTRVI6ICd1c2VyJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRQaG90b1RodW1ibmFpbFVybChwaG90bzogSVBhcnNlTW9kZWxQaG90b3MpIHtcbiAgICByZXR1cm4gcGhvdG8udGh1bWJuYWlsVXJsXG4gIH1cblxuICBzdGF0aWMgZ2V0T3JpZ2luYWxVcmwocGhvdG86IElQYXJzZU1vZGVsUGhvdG9zKSB7XG4gICAgcmV0dXJuIHBob3RvLm9yaWdpbmFsVXJsXG4gIH1cblxuICBzdGF0aWMgZ2V0SW1hZ2VVcmxJbkxpc3RQaG90b3NEaWN0KHBhcmFtczogSVBob3RvR2V0SW1hZ2VVcmxJbkxpc3RQaG90b3NEaWN0UGFyYW1zKSB7XG4gICAgY29uc3QgeyBtb2RlbCwgbGlzdFRhc2sgfSA9IHBhcmFtc1xuICAgIGNvbnN0IHsgaWQgfSA9IG1vZGVsXG4gICAgY29uc3QgeyBsaXN0UGhvdG9zRGljdCB9ID0gbGlzdFRhc2tcbiAgICBpZiAoISFsaXN0UGhvdG9zRGljdCkge1xuICAgICAgaWYgKE9iamVjdC5rZXlzKGxpc3RQaG90b3NEaWN0KS5pbmRleE9mKGlkKSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGxpc3RQaG90b3NEaWN0W2lkXVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIHN0YXRpYyBnZXRMaXN0VGh1bWJuYWlsVXJsKGl0ZW06IGFueSA9IHt9KSB7XG4gICAgY29uc3QgcGhvdG8gPSBpdGVtLmxpc3RQaG90byB8fCB7fVxuICAgIHJldHVybiBQaG90b3MuZ2V0UGhvdG9UaHVtYm5haWxVcmwocGhvdG8pXG4gIH1cblxuICBzdGF0aWMgaXNQaG90b1BhcnNlT2JqZWN0T3duUmVjaXBlKHJlY2lwZVVuaXF1ZUlkLCBwaG90b1BhcnNlSW5zdGFuY2U6IElQYXJzZU9iamVjdCkge1xuICAgIGNvbnN0IHJlY2lwZVBhcnNlSW5zdGFuY2UgPSBwaG90b1BhcnNlSW5zdGFuY2UuZ2V0KCdyZWNpcGUnKVxuICAgIGlmICghIXJlY2lwZVBhcnNlSW5zdGFuY2UgJiYgcmVjaXBlVW5pcXVlSWQgPT09IHJlY2lwZVBhcnNlSW5zdGFuY2UuZ2V0KCd1bmlxdWVJZCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBpc1Bob3RvT3duUmVjaXBlKHJlY2lwZVVuaXF1ZUlkOiBzdHJpbmcsIHBob3RvOiBJUGFyc2VNb2RlbFBob3Rvcykge1xuICAgIGNvbnN0IHJlY2lwZSA9IHBob3RvLnJlY2lwZVxuICAgIGlmICghIXJlY2lwZSkge1xuICAgICAgcmV0dXJuIHJlY2lwZVVuaXF1ZUlkID09PSByZWNpcGUudW5pcXVlSWRcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgZ2V0UGhvdG9UeXBlKHNlY3Rpb25UeXBlKSB7XG4gICAgY29uc3QgcGhvdG9UeXBlcyA9IFBob3Rvcy5jb25maWcucGhvdG9UeXBlc1xuICAgIHJldHVybiBwaG90b1R5cGVzW3NlY3Rpb25UeXBlXVxuICB9XG5cbiAgc3RhdGljIHJlbW92ZVBob3RvRnJvbUxpc3QoXG4gICAgeyBwaG90b3NDYWNoZSB9LFxuICAgIHNlbGVjdGVkUGhvdG86IElQYXJzZU1vZGVsUGhvdG9zXG4gICk6IElQYXJzZU1vZGVsUGhvdG9zW10ge1xuICAgIGNvbnN0IGlkID0gVW5kZXJzY29yZVV0aWxzLmZpbmRXaGVyZUluQXJyYXkoe1xuICAgICAgYXJyYXk6IHBob3Rvc0NhY2hlLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDogc2VsZWN0ZWRQaG90by5pZFxuICAgICAgfVxuICAgIH0pXG4gICAgY29uc3QgbmV4dFBob3Rvc0NhY2hlID0gVW5kZXJzY29yZVV0aWxzLndpdGhvdXRJbkFycmF5KHtcbiAgICAgIGFycmF5OiBwaG90b3NDYWNoZSxcbiAgICAgIGlkXG4gICAgfSkgYXMgSVBhcnNlTW9kZWxQaG90b3NbXVxuICAgIHJldHVybiBuZXh0UGhvdG9zQ2FjaGVcbiAgfVxuXG4gIHN0YXRpYyB0b1NlbGVjdGVkUGhvdG9DcmVhdGVkQXRTdHJpbmcoY3JlYXRlZEF0OiBEYXRlKSB7XG4gICAgcmV0dXJuIE1vbWVudFV0aWxzLnRvRGF0ZVN0cmluZyhjcmVhdGVkQXQsIFBob3Rvcy5jb25maWcuc2VsZWN0ZWRQaG90b0NyZWF0ZWRBdEZvcm1hdClcbiAgfVxufVxuIl19